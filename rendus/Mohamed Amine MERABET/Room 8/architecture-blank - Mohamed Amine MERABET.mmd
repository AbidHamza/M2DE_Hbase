flowchart TB

%% ===== Clients =====
ClientHive[Client Hive<br/>(Beeline)]
ClientHBase[Client HBase<br/>(HBase Shell)]

%% ===== Hive Layer =====
HiveServer2[HiveServer2]
Metastore[Hive Metastore]

%% ===== HBase Layer =====
HBaseMaster[HBase Master]
RegionServer1[HBase RegionServer 1]
RegionServer2[HBase RegionServer 2]

%% ===== Coordination =====
ZooKeeper[ZooKeeper]

%% ===== Compute =====
YARN[ YARN<br/>(ResourceManager + NodeManagers) ]

%% ===== Storage =====
HDFS[HDFS<br/>(NameNode + DataNodes)]
HFiles[HFiles]
WAL[WAL]

%% ===== Hive Flow =====
ClientHive --> HiveServer2
HiveServer2 --> Metastore
HiveServer2 --> YARN
YARN --> HDFS
HDFS --> HiveServer2
HiveServer2 --> ClientHive

%% ===== HBase Flow =====
ClientHBase --> ZooKeeper
ZooKeeper --> RegionServer1
ZooKeeper --> RegionServer2

ClientHBase --> RegionServer1
ClientHBase --> RegionServer2

RegionServer1 --> WAL
RegionServer2 --> WAL

RegionServer1 --> HFiles
RegionServer2 --> HFiles

WAL --> HDFS
HFiles --> HDFS

%% ===== Master Coordination =====
HBaseMaster --> ZooKeeper
HBaseMaster --> RegionServer1
HBaseMaster --> RegionServer2
