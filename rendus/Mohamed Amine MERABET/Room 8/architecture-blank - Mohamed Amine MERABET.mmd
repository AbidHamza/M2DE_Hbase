flowchart TB

%% ===== Nodes =====
ClientHive["Client Hive (Beeline)"]
ClientHBase["Client HBase (HBase Shell)"]

HiveServer2["HiveServer2"]
Metastore["Hive Metastore"]

HBaseMaster["HBase Master"]
RegionServer1["HBase RegionServer 1"]
RegionServer2["HBase RegionServer 2"]

ZooKeeper["ZooKeeper"]
YARN["YARN (ResourceManager + NodeManagers)"]

HDFS["HDFS (NameNode + DataNodes)"]
WAL["WAL"]
HFiles["HFiles"]

%% ===== Hive Flow =====
ClientHive --> HiveServer2
HiveServer2 --> Metastore
HiveServer2 --> YARN
YARN --> HDFS
HDFS --> HiveServer2

%% ===== HBase Flow =====
ClientHBase --> ZooKeeper
ZooKeeper --> RegionServer1
ZooKeeper --> RegionServer2

ClientHBase --> RegionServer1
ClientHBase --> RegionServer2

RegionServer1 --> WAL
RegionServer2 --> WAL
RegionServer1 --> HFiles
RegionServer2 --> HFiles

WAL --> HDFS
HFiles --> HDFS

%% ===== Master =====
HBaseMaster --> ZooKeeper
HBaseMaster --> RegionServer1
HBaseMaster --> RegionServer2

%% ===== Link styles =====
%% Hive
linkStyle 0,1,2,3,4 stroke:#1f77b4,stroke-width:2px;

%% HBase acc√®s
linkStyle 5,6,7,8 stroke:#2ca02c,stroke-width:2px;

%% HBase stockage
linkStyle 9,10,11,12 stroke:#d62728,stroke-width:2px;

%% Coordination
linkStyle 13,14,15 stroke:#9467bd,stroke-width:2px;
